apply plugin: 'java'

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.google.guava:guava:18.0'
    compile project(path: ':shelf')

    testCompile 'junit:junit:4.12'
    testCompile "org.mockito:mockito-core:1.9.5"
}

apply from: 'j2objc.gradle'
j2objcConfig {
    // MODIFY to where your unzipped j2objc directory is located
    // NOTE download the latest version from: https://github.com/google/j2objc/releases
    j2objcHome "/usr/local/j2objc-0.9.7"  // e.g. "${projectDir}/../../j2objc or absolute path

    // MODIFY to where generated objc files should be put for Xcode project
    // NOTE these files should be checked in to the repository and updated as needed
    // NOTE this should contain ONLY j2objc generated files, other contents will be deleted
    destDir "${projectDir}/j2objc_output"  // e.g. "${projectDir}/../Xcode/j2objc-generated"

    testExecutedCheck false

    appendProjectDependenciesToSourcepath = true
    translateSourcepaths "${projectDir}/libs/gson-2.3.1-sources.jar"
    translateFlags = "-use-arc --build-closure"
}

apply plugin: 'com.google.protobuf'

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.4.1'
    }
}

protocDep = 'com.google.protobuf:protoc:3.0.0-alpha-2'

dependencies {
    compile 'com.google.protobuf:protobuf-java:3.0.0-alpha-2'
    compile 'com.google.protobuf.nano:protobuf-javanano:3.0.0-alpha-2'
}


sourceSets {
    main {
        proto {
            builtins {
                javanano {
                    // Options added to --javanano_out
                    option 'java_multiple_files=true'
                    option 'ignore_services=true'
                }
            }
        }
    }
}



